# ç»“æ„ç±»å‹

ä¸ºäº†å°†åˆ†æ•£çš„é›¶ä»¶ç»„æˆä¸€ä¸ªå®Œæ•´çš„ç»“æ„ä½“ï¼ŒGo æä¾›äº† struct ç±»å‹

struct å…è®¸ä½ å°†ä¸åŒç±»å‹çš„ä¸œè¥¿ç»„åˆåœ¨ä¸€èµ·

## å£°æ˜ç»“æ„

å£°æ˜ç»“æ„å˜é‡

```go
var curiosity struct { // ä½¿ç”¨ var å£°æ˜çš„æ˜¯ å˜é‡
    lat  float64
    long float64
}

curiosity.lat = -4.5678
curiosity.long = -137.4417

fmt.Println(curiosity)

// output
{-4.5678 -137.4417}
```

## é€šè¿‡ç±»å‹å¤ç”¨ç»“æ„ä½“

å£°æ˜ç»“æ„ç±»å‹

```go
type location struct {
    lat  float64
    long float64
}

var spirit location
spirit.lat = -14.5684
spirit.long = 175.472636

var opportunity location
opportunity.lat = -1.9462
opportunity.long = 345.4734

// output
{-14.5684 175.472636} {-1.9462 345.4734}
```

## é€šè¿‡å¤åˆå­—é¢å€¼åˆå§‹åŒ– struct

ä¸¤ç§å½¢å¼ï¼š

- é€šè¿‡æˆå¯¹çš„å­—æ®µå’Œå€¼è¿›è¡Œåˆå§‹åŒ–ï¼Œ**æœªåˆå§‹åŒ–çš„å­—æ®µé»˜è®¤ä¸ºç±»å‹çš„é›¶å€¼**

```go
type location struct {
    lat, long float64
}

opportunity := location{lat: -1.9462, long: 345.4734}
fmt.Println(opportunity)

insight := location{lat: 4.5, long: 135.9}
fmt.Println(insight)
```

- æŒ‰å­—æ®µå®šä¹‰çš„é¡ºåºè¿›è¡Œåˆå§‹åŒ–

```go
spirit := location{173.09, -152.0}
fmt.Println(spirit)
```

## æ‰“å° struct

ä½¿ç”¨ `%+v` å¸¦å­—æ®µåæ‰“å°

```go
fmt.Printf("%v\n", insight)  // {4.5 135.9}
fmt.Printf("%+v\n", insight)  // {lat:4.5 long:135.9}
```

## struct çš„å¤åˆ¶

ç»“æ„ç±»å‹çš„å¤åˆ¶æ˜¯æ‹·è´äº†ä¸€ä»½åŸå˜é‡ï¼Œæ‰€ä»¥ï¼Œå¦‚æœå°† struct ç›´æ¥ä¼ å…¥å‡½æ•°å½¢å‚ï¼Œæ˜¯ä¸ä¼šæ”¹å˜å®å‚çš„å€¼ğŸ¤—

```go
spirit := location{173.09, -152.0}
new_spirit := spirit
new_spirit.long += 100
fmt.Println(spirit, new_spirit)
// output
{173.09 -152} {173.09 -52}
```

## struct slice

```go
locations := []location{
    {lat: 1.0, long: 2.0},
    {lat: 2.0, long: 3.5},
    {lat: 4.0, long: -1.0},
}
fmt.Println(locations)
```

## å°† struct ç¼–ç ä¸º JSON

JSON ï¼ˆJavaScript Object Notation, JavaScript å¯¹è±¡è¡¨ç¤ºæ³•ï¼‰ å¸¸ç”¨äº Web API

Go ä¸­ `json` åŒ…çš„ `Marshal` å‡½æ•°å¯ä»¥å°† struct ä¸­çš„æ•°æ®è½¬åŒ–ä¸º JSON æ ¼å¼ã€‚

```go
type location struct {
    Lat, Long float64  // å¿…é¡»ä¸ºå¤§å†™æ‰èƒ½è¾“å‡º
}

curiosity := location{Lat: 134.09, Long: -152.1}
bytes, err := json.Marshal(curiosity)
exitOnError(err)

fmt.Println(string(bytes))

// OTUPUT
{"Lat":134.09,"Long":-152.1}
```

`Marshal` å‡½æ•°åªä¼šå¯¹ `struct` ä¸­è¢«å¯¼å‡ºçš„å­—æ®µè¿›è¡Œç¼–ç ï¼Œä¹Ÿå°±æ˜¯é¦–å­—æ¯å¤§å†™çš„å­—æ®µ

## ä½¿ç”¨ struct æ ‡ç­¾æ¥è‡ªå®šä¹‰ JSON

Go è¯­è¨€ä¸­çš„ json åŒ…è¦æ±‚ struct ä¸­çš„å­—æ®µå¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œ
ç±»ä¼¼ CamelCase é©¼å³°å‹å‘½åè§„èŒƒã€‚

ä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ snake_case è›‡å½¢å‘½åè§„èŒƒï¼Œé‚£ä¹ˆè¯¥æ€ä¹ˆåŠï¼Ÿ
å¯ä»¥ä¸ºå­—æ®µæ³¨æ˜æ ‡ç­¾ï¼Œä½¿å¾— json åŒ…åœ¨è¿›è¡Œç¼–ç çš„æ—¶å€™èƒ½å¤ŸæŒ‰ç…§æ ‡ç­¾é‡Œçš„æ ·å¼ä¿®æ”¹å­—æ®µå

```go
type location struct {
    Lat  float64 `json:"latitude"` // ä¹Ÿå¯ä»¥æ˜¯ xml:"latitude" æ ¼å¼
    Long float64 `json:"longitude"`
}

curiosity := location{Lat: 134.09, Long: -152.1}
bytes, err := json.Marshal(curiosity)
exitOnError(err)

fmt.Println(string(bytes))
// {"latitude":134.09,"longitude":-152.1}
```


