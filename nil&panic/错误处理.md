# 错误处理

Go 语言允许函数和方法同时返回多个值

按照惯例，函数在返回错误时，最后边的返回值应用来表示错误。

调用函数后，应立即检查是否发生错误。

如果没有错误发生，那么返回的错误值为 nil

### 注意

当错误发生时，函数返回的其它值通常就不再可信

## 优雅的错误处理

减少错误处理代码的一种策略是：
将程序中不会出错的部分和包含潜在错误隐患的部分隔离开来。

对于不得不返回错误的代码，应尽力简化相应的错误处理代码。

## 内置类型 error

内置类型 `error` 用来表示错误。

## defer 关键字

使用 `defer` 关键字，Go 可以确保所有 deferred 的动作可以在函数返回前执行。

可以 defer 任意的函数和方法。

defer 并不是专门做错误处理的。 

defer 可以消除必须时刻惦记执行资源释放的负担

## New error

errors 包里有一个构造用 New 函数，
它接收 string 作为参数用来表示错误信息。该函数返回 error 类型。

## 自定义错误类型

error 类型是一个内置的接口：

任何类型只要实现了返回 string 的 Error() 方法就满足了该接口。

可以创建新的错误类型。

## 类型断言

上例中，我们可以使用类型断言来访问每一种错误。

使用类型断言，你可以把接口类型转化成底层的具体类型。

例如：`err.(SudokuError)`

如果类型满足多个接口，
那么类型断言可使它从一个接口类型转化为另一个接口类型。

## 不要恐慌 don't panic

Go 没有异常，它有个类似机制 panic。

当 panic 发生，那么程序就会崩溃。

## 错误值、panic、os.Exit

通常，更推荐使用错误值，其次才是 panic。

panic 比 os.Exit 更好：
panic 后会执行所有 defer 的动作，而 os.Exit 则不会。

## 保持冷静并继续

为了防止 panic 导致程序崩溃，Go 提供了 recover 函数。

defer 的动作会在函数返回前执行，即使发生了 panic

但如果 defer 的函数调用了 recover，panic 就会停止，程序将继续运行。



