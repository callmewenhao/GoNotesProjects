# åˆ‡ç‰‡

Slice æŒ‡å‘æ•°ç»„çš„çª—å£

- å‡è®¾ `planets` æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆ `planets[0:4]` å°±æ˜¯ä¸€ä¸ªåˆ‡ç‰‡ï¼Œå®ƒåˆ‡åˆ†å‡ºäº†æ•°ç»„é‡Œå‰ 4 ä¸ªå…ƒç´ ã€‚

åˆ‡åˆ†æ•°ç»„ä¸ä¼šå¯¼è‡´æ•°ç»„è¢«ä¿®æ”¹ï¼Œå®ƒåªæ˜¯åˆ›å»ºäº†æŒ‡å‘æ•°ç»„çš„ä¸€ä¸ªçª—å£æˆ–è§†å›¾ï¼Œè¿™ç§è§†å›¾å°±æ˜¯ slice ç±»å‹ã€‚

## åˆ‡åˆ†æ•°ç»„

Slice ä½¿ç”¨çš„æ˜¯åŠå¼€åŒºé—´

- ä¾‹å¦‚ `planets[0:4]`ï¼ŒåŒ…å«ç´¢å¼• 0ã€1ã€2ã€3 å¯¹åº”çš„å…ƒç´ ï¼Œä¸åŒ…æ‹¬ç´¢å¼• 4 å¯¹åº”çš„å…ƒç´ ã€‚

## Slice çš„é»˜è®¤ç´¢å¼•

> å’Œ python ç±»ä¼¼

å¿½ç•¥æ‰ slice çš„èµ·å§‹ç´¢å¼•ï¼Œè¡¨ç¤ºä»æ•°ç»„çš„èµ·å§‹ä½ç½®è¿›è¡Œåˆ‡åˆ†ï¼›

å¿½ç•¥æ‰ slice çš„ç»“æŸç´¢å¼•ï¼Œç›¸å½“äºä½¿ç”¨æ•°ç»„çš„é•¿åº¦ä½œä¸ºç»“æŸç´¢å¼•ã€‚

æ³¨æ„ï¼šslice çš„ç´¢å¼•ä¸èƒ½æ˜¯è´Ÿæ•°

å¦‚æœåŒæ—¶çœç•¥æ‰èµ·å§‹å’Œç»“æŸç´¢å¼•ï¼Œé‚£å°±æ˜¯åŒ…å«æ•°ç»„æ‰€æœ‰å…ƒç´ çš„ä¸€ä¸ª sliceã€‚

åˆ‡åˆ†æ•°ç»„çš„è¯­æ³•ä¹Ÿå¯ä»¥ç”¨äºåˆ‡åˆ†å­—ç¬¦ä¸²

- åˆ‡åˆ†å­—ç¬¦ä¸²æ—¶ï¼Œç´¢å¼•ä»£è¡¨çš„æ˜¯å­—èŠ‚æ•°è€Œé rune çš„æ•°ã€‚

```go
neptune := "Neptune"
tune := neptune[3:]

fmt.Println(tune)  // tune
neptune = "Poseidon"
fmt.Println(tune)  // tune
```

## Slice çš„å¤åˆå­—é¢å€¼

Go é‡Œé¢å¾ˆå¤šå‡½æ•°éƒ½å€¾å‘äºä½¿ç”¨ slice è€Œä¸æ˜¯æ•°ç»„ä½œä¸ºå‚æ•°ã€‚

æƒ³è¦è·å¾—ä¸åº•å±‚æ•°ç»„ç›¸åŒå…ƒç´ çš„ sliceï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ `[:]` è¿›è¡Œåˆ‡åˆ†

åˆ‡åˆ†æ•°ç»„å¹¶ä¸æ˜¯åˆ›å»º slice å”¯ä¸€çš„æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥å£°æ˜ sliceï¼š`[]string`

```go
dwarfArray := [...]string{"ceres", "Pluto", "Haumea", "Makemake", "Eris"}
dwarfslice := dwarfArray[:]

// ä¸‹é¢ç›´æ¥å£°æ˜ä¸€ä¸ªåˆ‡ç‰‡
dwarfs := []string{"ceres", "Pluto", "Haumea", "Makemake", "Eris"}
fmt.Println(dwarfslice, dwarfs)
```

## å¸¦æœ‰æ–¹æ³•çš„åˆ‡ç‰‡

åœ¨ Go é‡Œï¼Œå¯ä»¥å°† slice æˆ–æ•°ç»„ä½œä¸ºåº•å±‚ç±»å‹ï¼Œç„¶åç»‘å®šå…¶å®ƒæ–¹æ³•ã€‚

```go
planets := []string{
    "Mercury", "Venus", "Earth", "Mars",
    "Jupiter", "Saturn", "Uranus", "Neptune",
}
// å…ˆå°† planets è½¬æˆ StringSlice ç±»å‹ï¼Œåœ¨è¿›è¡Œæ’åº
sort.StringSlice(planets).Sort() // å¦‚æœä¸è¿›è¡Œç±»å‹è½¬æ¢ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™
fmt.Println(planets)
```

## æ›´å¤§çš„åˆ‡ç‰‡

### append å‡½æ•°

`append` å‡½æ•°ä¹Ÿæ˜¯å†…ç½®å‡½æ•°ï¼Œå®ƒå¯ä»¥å°†å…ƒç´ æ·»åŠ åˆ° slice é‡Œé¢ã€‚

```go
dwarfs := []string{"ceres", "Pluto", "Haumea", "Makemake", "Eris"}
dwarfs = append(dwarfs, "Orus")
dwarfs = append(dwarfs, "Salacia", "Quaoar", "Sedna")
fmt.Println(dwarfs)
```

### é•¿åº¦å’Œå®¹é‡ length & capacity 

slice ä¸­å…ƒç´ çš„ä¸ªæ•°å†³å®šäº† slice çš„é•¿åº¦ã€‚

å¦‚æœ slice çš„åº•å±‚æ•°ç»„æ¯” slice è¿˜å¤§ï¼Œé‚£ä¹ˆå°±è¯´è¯¥ slice è¿˜æœ‰å®¹é‡å¯ä¾›å¢é•¿ã€‚

```go
func dump(label string, slice []string) {
	fmt.Printf("%v: length %v, capacity %v %v\n", label, len(slice),
		cap(slice), slice)
}

dwarfs := []string{"ceres", "Pluto", "Haumea", "Makemake", "Eris"}
dump("dwarfs", dwarfs)
dump("dwarfs[1:2]", dwarfs[1:2])

// output
// dwarfs: length 5, capacity 5 [ceres Pluto Haumea Makemake Eris]
// dwarfs[1:2]: length 1, capacity 4 [Pluto]  æ³¨æ„å®¹é‡æ˜¯4
```

### append å‡½æ•°è¯¦è§£

```go
dwarfs1 := []string{"Ceres", "Pluto", "Haumea", "Makemake", "Eris"}
dwarfs2 := append(dwarfs1, "Orcus")
dwarfs3 := append(dwarfs2, "Salacia", "Quaoar", "Sedna")

dump("dwarfs1", dwarfs1)
dump("dwarfs2", dwarfs2)
dump("dwarfs3", dwarfs3)
// output åº•å±‚æ•°ç»„çš„å®¹é‡ä¼šå¢åŠ 
dwarfs1: length 5, capacity 5 [Ceres Pluto Haumea Makemake Eris]
dwarfs2: length 6, capacity 10 [Ceres Pluto Haumea Makemake Eris Orcus]
dwarfs3: length 9, capacity 10 [Ceres Pluto Haumea Makemake Eris Orcus Salacia Quaoar Sedna]
// æ³¨æ„ç”±äºå®¹é‡çš„æ”¹å˜ï¼Œdwarfs1 å¯¹åº”ä¸€ä¸ªåº•å±‚æ•°ç»„ï¼Œ
// dwarfs2 å’Œ dwarfs3 å¯¹åº”å¦ä¸€ä¸ªåº•å±‚æ•°ç»„ğŸ˜’
```

### ä¸‰ä¸ªç´¢å¼•çš„åˆ‡åˆ†æ“ä½œ

Go 1.2 ä¸­å¼•å…¥äº†èƒ½å¤Ÿ**é™åˆ¶æ–°å»ºåˆ‡ç‰‡å®¹é‡**çš„ä¸‰ç´¢å¼•åˆ‡åˆ†æ“ä½œã€‚è¿™å—å¾—å¥½å¥½ç†è§£

```go
planets := []string{
    "Mercury", "Venus", "Earth", "Mars",
    " Jupiter", "Saturn", "Uranus", "Neptune",
}
terrestrial := planets[0:4:4]  // é™åˆ¶åˆ‡ç‰‡çš„åº•å±‚æ•°ç»„capä¸º4
worlds := append(terrestrial, "Ceres")
dump("planets", planets)
dump("terrestrial", terrestrial)
dump("worlds", worlds)

// output
planets: length 8, capacity 8 [Mercury Venus Earth Mars  Jupiter Saturn Uranus Neptune]
terrestrial: length 4, capacity 4 [Mercury Venus Earth Mars]
worlds: length 5, capacity 8 [Mercury Venus Earth Mars Ceres]
```

### ä½¿ç”¨ make å‡½æ•°å¯¹ slice è¿›è¡Œé¢„åˆ†é…

å½“ slice çš„å®¹é‡ä¸è¶³ä»¥æ‰§è¡Œ append æ“ä½œæ—¶ï¼ŒGo å¿…é¡»åˆ›å»ºæ–°æ•°ç»„å¹¶å¤åˆ¶æ—§æ•°ç»„ä¸­çš„å†…å®¹ã€‚

ä½†é€šè¿‡å†…ç½®çš„ make å‡½æ•°,å¯ä»¥å¯¹ slice è¿›è¡Œé¢„åˆ†é…ç­–ç•¥ã€‚

- å°½é‡é¿å…é¢å¤–çš„å†…å­˜åˆ†é…å’Œæ•°ç»„å¤åˆ¶æ“ä½œ

```go
dwarfs1 := make([]string, 0, 10) // é•¿åº¦æ˜¯ 0 å®¹é‡æ˜¯ 10
dwarfs2 := make([]string, 10)     // é•¿åº¦æ˜¯ 10 å®¹é‡æ˜¯ 10
dump(" dwarfs1", dwarfs1)
dump(" dwarfs2", dwarfs2)
dwarfs1 = append(dwarfs1, "ceres", "Pluto", "Haumea", "Makemake", "Eris")  // åœ¨åŸæ¥çš„åŸºç¡€ä¸Š append
dump(" dwarfs1", dwarfs1)
// output
dwarfs1: length 0, capacity 10 []
dwarfs2: length 10, capacity 10 [         ] // 10ä¸ªç©ºä¸²
dwarfs1: length 5, capacity 10 [ceres Pluto Haumea Makemake Eris]
```

### å£°æ˜å¯å˜å‚æ•°çš„å‡½æ•°

å£°æ˜ `Printf`ã€`append` è¿™æ ·çš„å¯å˜å‚æ•°å‡½æ•°ï¼Œéœ€è¦åœ¨å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°å‰é¢åŠ ä¸Š `...` ç¬¦å·ã€‚

```go
func terraform(prefix string, worlds ...string) []string {
    newWorlds := make([]string, len(worlds))
    for i := range worlds {
        newWorlds[i] = prefix + " " + worlds[i]
    }
    return newWorlds
}

twoWorlds := terraform("New", "Venus", "Mars")
fmt.Println(twoWorlds)
planets := []string{"Venus", "Mars", "Jupiter"}
newPlanets := terraform("New", planets ...)  // è¿™é‡Œ...æ˜¯æŠŠåˆ‡ç‰‡å±•å¼€
fmt.Println(newPlanets)

// output
[New Venus New Mars]
[New Venus New Mars New Jupiter]
```





